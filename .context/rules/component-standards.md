# 视图层研发规范

视图层是用户直接交互的界面层，负责**组件渲染、用户交互处理、样式实现**，为应用提供一致的用户体验。

## 1. 视图层职责定义

### 1.1 核心职责

| 职责类别     | 具体内容                | 禁止事项            |
| ------------ | ----------------------- | ------------------- |
| **界面渲染** | 组件 DOM 结构、样式实现 | ❌ 业务逻辑处理     |
| **交互处理** | 用户事件响应、状态更新  | ❌ 直接调用服务接口 |
| **数据展示** | 展示业务数据、状态反馈  | ❌ 数据格式转换     |
| **样式实现** | CSS 样式、主题适配      | ❌ 样式侵入其他组件 |

### 1.2 边界原则

- **纯视图组件**：只负责界面展示和交互
- **无业务依赖**：不包含业务逻辑
- **类型安全**：完整的 TypeScript 类型定义
- **受控组件**：状态由父组件或状态管理器控制

## 2. 组件设计与开发规范

### 2.1 组件开发流程

1. **需求分析**：明确组件功能范围和使用场景
2. **组件检索**：检查现有组件，避免重复开发
3. **类型定义**：定义完整的 Props 和 State 类型
4. **组件实现**：编写组件渲染逻辑
5. **样式实现**：编写组件样式
6. **测试用例**：编写组件测试用例

### 2.2 组件设计原则

- **单一职责**：一个组件只负责一个功能
- **组合优于继承**：通过组合实现复杂功能
- **受控组件**：通过 Props 控制组件状态
- **无副作用**：组件渲染不产生副作用

## 3. 组件分类与命名规范

### 3.1 组件分类

| 组件类型 | 特征 | 示例 | 存放位置 |
| --- | --- | --- | --- |
| **基础组件** | 通用 UI 元素，无业务含义 | button, input, modal | `src/components/base/` |
| **业务组件** | 特定业务场景的组件 | user-card, order-list | `src/components/business/` |
| **布局组件** | 页面布局相关组件 | layout, grid, container | `src/components/layout/` |
| **页面组件** | 页面级组件 | home-page, detail-page | `src/pages/{页面名称}/` |

### 3.2 命名规范

- **组件名**：PascalCase，如 `Index.tsx`
- **目录名**：PascalCase，如 `UserCard`
- **样式文件**：与组件同名，如 `index.less`

## 4. 目录结构规范

### 4.1 公共组件目录结构

```
src/components/
├── Button/         # 按钮组件
│   ├── index.tsx      # 组件实现
│   ├── index.less     # 组件样式
│   ├── index.md       # 组件文档
│   └── index.test.tsx # 组件测试
```

### 4.2 页面组件目录结构

```
src/pages/{页面名称}/
├── index.tsx           # 页面入口
├── components/         # 页面私有组件
│   ├── MyComponent1/ # 局部组件,不需要index.md
│   │   ├── index.tsx
│   │   ├── index.less
│   │   └── index.test.tsx
└── hooks/             # 页面逻辑
```

## 5. 组件实现规范

### 5.1 Props 定义规范

- **必需属性**：使用 `isRequired` 明确标识
- **默认值**：为可选属性提供合理的默认值
- **类型安全**：使用 TypeScript 定义完整类型
- **文档注释**：为每个 Props 添加 JSDoc 注释

### 5.2 组件实现要求

- **函数组件**：使用函数组件而非类组件
- **Hooks 使用**：合理使用 React Hooks
- **类型注解**：完整的 TypeScript 类型注解
- **事件处理**：使用箭头函数避免不必要的重新渲染

## 6. 样式实现规范

### 6.1 样式方案

- **Tailwind CSS**：优先使用 Tailwind CSS 工具类
- **CSS Modules**：组件样式隔离（次选方案）
- **Less 预处理**：支持变量、混合等特性（次选方案）
- **主题适配**：通过 CSS 变量支持主题切换,仅有明确需求时才使用
- **组件库样式**：禁止覆盖组件库原有样式,会导致难以排查的全局副作用

> ⚠️ **重要提醒**：历史代码中存在的 `import styles from './style.less'` 导入方式已废弃，请勿参考。新组件开发请直接使用 Tailwind CSS 工具类进行样式实现。

### 6.2 样式命名规范

- **BEM 命名**：块（Block）-元素（Element）-修饰符（Modifier）
- **语义化**：使用有意义的类名
- **命名空间**：以组件名作为命名空间

## 7. 组件文档规范

### 7.1 文档内容

每个组件必须包含以下文档内容：

1. **功能描述**：组件的核心功能
2. **使用场景**：适用的业务场景
3. **API 说明**：Props 详细说明
4. **使用示例**：典型使用方式

### 7.2 文档格式

使用 Markdown 格式编写组件文档，参考示例：[组件模式示例](../examples/component-patterns)
